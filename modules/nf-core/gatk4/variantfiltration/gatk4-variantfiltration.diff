Changes in module 'nf-core/gatk4/variantfiltration'
--- modules/nf-core/gatk4/variantfiltration/main.nf
+++ modules/nf-core/gatk4/variantfiltration/main.nf
@@ -12,6 +12,7 @@
     tuple val(meta2), path(fasta)
     tuple val(meta3), path(fai)
     tuple val(meta4), path(dict)
+    tuple val(meta5), path(mask), path(mask_idx) // optional mask file, eg bed or vcf, and max index file. see GATK IndexFeatureFile
 
     output:
     tuple val(meta), path("*.vcf.gz"), emit: vcf
@@ -24,6 +25,10 @@
     script:
     def args = task.ext.args ?: ''
     def prefix = task.ext.prefix ?: "${meta.id}"
+    // Check if --filter-not-in-mask is in args
+    args = mask ? (args.contains('--filter-not-in-mask')
+        ? args.replace("--filter-not-in-mask", " --filter-not-in-mask ${mask}") 
+        : args + " --mask ${mask}") : ''
 
     def avail_mem = 3072
     if (!task.memory) {

************************************************************
